---
title: "R Notebook"
output:
  html_document:
    df_print: paged
---

This is an [R Markdown](http://rmarkdown.rstudio.com) Notebook. When you execute code within the notebook, the results appear beneath the code. 

Try executing this chunk by clicking the *Run* button within the chunk or by placing your cursor inside it and pressing *Cmd+Shift+Enter*. 

```{r fig.height=5}
#### Install morpheus
# devtools::install_github('cmap/morpheus.R')
# Load morpheus
library(morpheus)
library(datasets)

data(mtcars)
#head(mtcars)
# mpg cyl disp  hp drat    wt  qsec vs am gear carb
# Mazda RX4         21.0   6  160 110 3.90 2.620 16.46  0  1    4    4
# Mazda RX4 Wag     21.0   6  160 110 3.90 2.875 17.02  0  1    4    4
# Datsun 710        22.8   4  108  93 3.85 2.320 18.61  1  1    4    1
# Hornet 4 Drive    21.4   6  258 110 3.08 3.215 19.44  1  0    3    1
# Hornet Sportabout 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2
# Valiant           18.1   6  225 105 2.76 3.460 20.22  1  0    3    1

### cluster by correlation
### scalingMode = "fixed" makes it so that it doesn't automatically rescale colors by rows
# morpheus( mtcars,
#           distfun = function(x) as.dist(1 - cor(t(x), use = "pairwise.complete.obs")),
#           Rowv = T,
#           Colv = T,
#           dendrogram = "both",
#           colorScheme = list(scalingMode = "fixed",
#                              colors = list("blue", "white", "red"))
# )

#### example of shiny code
# output$myheatmap = renderMorpheus({
#   morpheus( mtcars,
#             distfun = function(x) as.dist(1 - cor(t(x), use = "pairwise.complete.obs")),
#             Rowv = T,
#             Colv = T,
#             dendrogram = "both",
#             colorScheme = list(scalingMode = "fixed", values = list(0,50,100),
#                                colors = list("blue", "white", "red") )
#   )
# })
# 
# morpheusOutput("myheatmap", height = "800px")
morpheus(mtcars, height = "300px")
```

Add a new chunk by clicking the *Insert Chunk* button on the toolbar or by pressing *Cmd+Option+I*.

When you save the notebook, an HTML file containing the code and output will be saved alongside it (click the *Preview* button or press *Cmd+Shift+K* to preview the HTML file). 

The preview shows you a rendered HTML copy of the contents of the editor. Consequently, unlike *Knit*, *Preview* does not run any R code chunks. Instead, the output of the chunk when it was last run in the editor is displayed.

